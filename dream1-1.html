<!DOCTYPE html>
<html>
   <head>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">

      <title>꿈 상영회</title>
      <meta charset="utf-8"> 
      <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400&display=swap" rel="stylesheet">
      
      <style>
         *{font-family: 'Noto Serif KR', serif;}
         body{background-image:url('./img/sisterBg.png'); 
             background-position: center;   
             background-repeat: no-repeat;
         }
         .csMsg1 { border-radius: 0px 20px 0px 20px; margin: 5px; color:white; background-color: #2EB966;}
         .csMsg2 {border:dotted 3px;  margin: 5px blue; color:blue;background:pink;}


         #animate {
            position : absolute;
            z-index  : 10;
            top      : 100px;
            left     : 30px;
            width    : 100px;
            height   : 100px;
            animation: move 5s ease infinite;
         }

         #animate2 {
            position : absolute;
            z-index  : 10;
            top      : 100px;
            right    : 450px;
            width    : 100px;
            height   : 100px;
            animation: move 10s ease infinite;
         }
            
         #animate3 {
            position : absolute;
            z-index  : 10;
            top      : 100px;
            right    : 450px;
            width    : 100px;
            height   : 100px;
            animation: move 2s ease infinite;
         }

         #animate4 {
            position : absolute;
            z-index  : 10;
            top      : 6500px;
            left     : 120px;
            width    : 500px;
            height   : 100px;
            animation: move 5s ease infinite;
         }

         #animate5 { 
            position : absolute;
            z-index  : 10;
            top      : 4500px;
            left     : 50px;
            -webkit-animation:move 8s ease infinite;
            -moz-animation:move 4s ease infinite;
            animation: move 10s ease infinite;
         }
            
         #animate6 {
            position : absolute;
            z-index  : 10;
            top      : 3500px;
            left     : 470px;
            width    : 100px;
            height   : 100px;
            animation: move 2s ease infinite;
         }

         @keyframes move { 50% {transform: translate(100px, 100px);}}
         @-webkit-keyframes move { 50% {-webkit-transform: translate(800px, 0px);}}
         @-moz-keyframes move { 50% {transform: translate(800px, 0px);}}


         
         .context {
            position : fixed;
            top      : -180px;
            left     : 50%;
            z-index  : 20;
            transform: translate(-50%, 00%);   /* 좌측으로 절반 이동 */
         }  

         .esteregg::selection {
            background: black;
            color: #fff;
         }        
         
         .scrollText{
            margin-top: 1000px;
            color:blueviolet;
            z-index: 30;
            text-align:center;
            opacity: 0;
            transition: all 2.5s;  /* n초에 걸쳐서 투명도 0*/ 
         }

      </style>

      <style>
         .stage {
            height: calc(100vh + 800px); ;
            display: flex;
            justify-content: right;
            padding-right:200px;
            align-items: flex-end;    
         }

         .door {
            position: relative;
            width: 100px;
            height: 150px;            
         }
         
         .door-back{
            overflow: hidden;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: black;
         }
         /* 
         이동 애니메이션을 위해 미리 이동시켜놓기
         translate3D를 활용하면 GPU를 특별히 사용한다고 한다
         %를 지정하면 각 수치에 따라 알아서 움직이기때문에 편리하다.
         */
         .door:nth-child(2) .dog{
            background-image: url("./img/dog2.png");
         }

         .door-body{
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            transition: 1s;
            transform-origin: 0%;
         }

         .door:nth-child(2) .door-body {
            background: #f2f2f2;
         }
         .door:hover .door-body{
            transform: perspective(800px) rotateY(-120deg);  
         }
      </style>

   </head> 

   <body style="width:100%; height:7000px" onload="myScr()">
      
      <div class="scrollText" style="margin-left :60%;"><h3>그런데 이거 꿈인가?</h3></div>
      <div class="scrollText" style="margin-left :80%;">    뭔가 익숙해</div>
      <div class="scrollText" style="margin-right:59%;"><h3>아 맞다 그거 해야하는데</h3></div>
      <div class="scrollText" style="margin-left :45%;">    어디로 향하는 거지?</div>
      <div class="scrollText" style="margin-right:60%;"><h2>잊은건 없나?</h2></div>
      <div class="scrollText" style="margin-right:70%;">    데자뷔인가</div>

       <div class="context" style="text-align: center; margin-top:330px; line-height: 35px;">
         마법학교에 들어간다.<BR>
         <span id="idMsg21" class="csMsg2"></span>은(는) 비행 연습을 하고 있고, 나도 비행연습을 하기위해 비행용 빗자루를 찾아다닌다.<BR>
         그때 <span id="idMsg22"class="csMsg2"></span>은(는) <span id="idMsg11" class="csMsg1"></span>을(를) 타고 날아다니고 있다.<BR>
         나의 비행도구도 <span id="idMsg12" class="csMsg1"></span>이다.<BR>

         <span class="esteregg" style="color: rgb(231, 231, 231);">그런데, 고사리에 분무하는 걸 한동안 잊었더니 가장 예쁜 줄기가 갈색으로 타버린 적이 있다. 
            <a href="dream1-1.html" class="esteregg" style="color: rgb(231, 231, 231); text-decoration: none;"> (들어가기)</a>
         </span> <BR>

         뭔가 이상하다 싶으면서도 승차감이 너무 좋고 효율적이어서 요즘엔 이게 핫 아이템이구나, 하고 열심히 비행연습을 한다.<BR>
         그때 <span id="idMsg23" class="csMsg2"></span>은(는) 나에게 갑자기 마법 전쟁에 나가란 말을 한다.<BR>
         사실 난 아직 비행을 잘 하지 못하는데… 어떻게 해야 하는지 물어봄과 동시에 이미 나는 전쟁에 출전해 있고<BR>
         날지는 못하지만,부지런해지기 마법은 할 줄 알아서 점프하고 마법 쏘고 점프하고 마법을 쏜다. <BR>
        
      </div>

      <div  id="animate" ><img src="./img/gosari.png"  alt=""></div>
      <div  id="animate2"><img src="./img/gosari2.png" alt=""></div>
      <span id="animate3">Ppiyong!</span>
      <div  id="animate4"><img src="./img/sister.png"  alt=""></div>
      <div  id="animate5"><img src="./img/buds.png"    alt=""></div>
      <span id="animate6">Ppiyong!</span>

      <!-- 문 위치 -->
      <div class="stage">
         <div class="door">
             <div class="door-body"></div>
         </div>
         <div class  = "door" 
              onclick = "window.location='./darkroom.html'"><!-- 암실 이동할 URL -->
               <div class="door-back">
                 <div class="dog"></div>
               </div>         
               <div class="door-body"></div>
         </div>      
      </div>

      <!-- 자바스크립트 소스  -->
      <SCRIPT language="javascript">
 
         // 자동스크롤
         // =======================================================================
         myY = 0; //초기 포커싱위치를 0으로 설정해주도록한다
         function myScr() {
            window.scroll(0,myY); //스크롤바의 위치 설정
            myY = myY + 2.5; //y의 값을 점점 내리도록한다(속도))
            timer = setTimeout("myScr()", 5) ; //0.001초마다 이 함수를 반복하도록설정
            if(myY ==7000) {   //만약 y축의 값이 300이 되면 초기화를 하도록설정
               clearTimeout(timer);
               // myY = 0;
            } 
         }
         //  
         // =======================================================================
         const url = new URL(this.location);
         // URLSearchParams 객체
         const urlParams = url.searchParams;
      
         // URLSearchParams.get()
         var msg1   = urlParams.get('msg1') ; 
         var msg2   = urlParams.get('msg2') ; 


         document.getElementById("idMsg11").innerHTML = msg1;
         document.getElementById("idMsg12").innerHTML = msg1;

         document.getElementById("idMsg21").innerHTML = msg2;        
         document.getElementById("idMsg22").innerHTML = msg2;    
         document.getElementById("idMsg23").innerHTML = msg2;    

         // 페이드 인 되는 텍스트
         // =======================================================================
         let observer = new IntersectionObserver((e)=>{
            e.forEach((박스)=>{
               if(박스.isIntersecting){
               박스.target.style.opacity = 1;
               }
            })
         })

         let divs = document.querySelectorAll('div.scrollText')
         observer.observe(divs[0])<!--div n번째-->
         observer.observe(divs[1]) 
         observer.observe(divs[2]) 
         observer.observe(divs[3]) 
         observer.observe(divs[4]) 
         observer.observe(divs[5]) 
         observer.observe(divs[6]) 

      </SCRIPT> 

   </body>
</html>
